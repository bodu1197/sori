# ğŸš€ í™•ì¥ì„±(Scalability) ì„¤ê³„ ê°€ì´ë“œ

> ì „ ì„¸ê³„ ì‚¬ìš©ìë¥¼ ìœ„í•œ í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜

---

## ğŸ“Š ë™ì‹œì ‘ì†ì ì‹œë‚˜ë¦¬ì˜¤

| ê·œëª¨ | ë™ì‹œì ‘ì†  | ì¸í”„ë¼      |  ì›” ë¹„ìš©  |
| :--: | :-------: | ----------- | :-------: |
| ì´ˆê¸° |  ~100ëª…   | ë¬´ë£Œ í”Œëœë“¤ |  **$0**   |
| ì„±ì¥ | ~1,000ëª…  | ìœ ë£Œ ì „í™˜   | **~$35**  |
| í™•ì¥ | ~10,000ëª… | ë³¸ê²© ì¸í”„ë¼ | **~$155** |

---

## ğŸ—ï¸ í™•ì¥ì„± ê³ ë ¤ ì•„í‚¤í…ì²˜

### ê¸°ë³¸ vs í™•ì¥ ì„¤ê³„ ë¹„êµ

```
[ê¸°ë³¸ ì„¤ê³„]                      [í™•ì¥ì„± ê³ ë ¤ ì„¤ê³„]
â”â”â”â”â”â”â”â”â”â”                       â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Vercel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º    Vercel (ê·¸ëŒ€ë¡œ OK! âœ…)
  â”‚                                â”‚
  â–¼                                â–¼
Railway (ë‹¨ì¼ ì„œë²„) â”€â”€â”€â”€â”€â”€â”€â”€â–º    Fly.io (ìë™ í™•ì¥, ê¸€ë¡œë²Œ)
  â”‚                                â”‚
  â–¼                                â–¼
Supabase â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º    Supabase + Redis ìºì‹œ
                                   â”‚
                                   â–¼
                                CDN (Cloudflare)
```

---

## ğŸ”§ ê° ê³„ì¸µë³„ í™•ì¥ ì „ëµ

### 1ï¸âƒ£ í”„ë¡ íŠ¸ì—”ë“œ (Vercel)

```
âœ… ìë™ ê¸€ë¡œë²Œ CDN
âœ… ìë™ ìŠ¤ì¼€ì¼ë§
âœ… ì„œë²„ë¦¬ìŠ¤

ğŸ‘‰ ë³€ê²½ í•„ìš” ì—†ìŒ! Vercelì€ ì´ë¯¸ í™•ì¥ì„± ìˆìŒ
```

### 2ï¸âƒ£ ë°±ì—”ë“œ ì„œë¹„ìŠ¤ ë¹„êµ

| ì„œë¹„ìŠ¤        | ìë™ í™•ì¥ | ê¸€ë¡œë²Œ | ê°€ê²©        |  ì¶”ì²œ  |
| ------------- | :-------: | :----: | ----------- | :----: |
| Railway       |  âš ï¸ ìˆ˜ë™  |   âŒ   | ì‹¸ë‹¤        |  ì´ˆê¸°  |
| **Fly.io**    |  âœ… ìë™  |   âœ…   | ì‚¬ìš©ëŸ‰ ê¸°ë°˜ | â­â­â­ |
| **Cloud Run** |  âœ… ìë™  |   âœ…   | ì‚¬ìš©ëŸ‰ ê¸°ë°˜ | â­â­â­ |
| AWS Lambda    |  âœ… ìë™  |   âœ…   | ë³µì¡í•¨      |  â­â­  |

#### Fly.io ì¥ì 

```
- ì „ ì„¸ê³„ 30+ ë¦¬ì „ì— ìë™ ë°°í¬
- ì‚¬ìš©ìì™€ ê°€ê¹Œìš´ ì„œë²„ì—ì„œ ì‘ë‹µ
- 0ì—ì„œ ìë™ í™•ì¥ (ë¹„ìš© ì ˆì•½)
- Docker ê¸°ë°˜ìœ¼ë¡œ ì‰¬ìš´ ë°°í¬
```

### 3ï¸âƒ£ ë°ì´í„°ë² ì´ìŠ¤ í™•ì¥

#### Supabase ë¬´ë£Œ í”Œëœ í•œê³„

- DB ìš©ëŸ‰: 500MB
- ì›” API ìš”ì²­: ì œí•œ ìˆìŒ
- ë™ì‹œ ì—°ê²°: ì œí•œì 

#### í™•ì¥ ë°©ì•ˆ: Redis ìºì‹œ ì¶”ê°€

```
ì‚¬ìš©ì â”€â”€â–º Redis (ìºì‹œ) â”€â”€â–º Supabase (DB)
             â†‘
             â”‚
        ìì£¼ ìš”ì²­ë˜ëŠ” ë°ì´í„°ëŠ”
        Redisì—ì„œ ë°”ë¡œ ì‘ë‹µ!
        (DB ë¶€í•˜ 90% ê°ì†Œ)
```

#### Redis ì„œë¹„ìŠ¤ ì¶”ì²œ

| ì„œë¹„ìŠ¤      | ë¬´ë£Œ í”Œëœ         | íŠ¹ì§•           |
| ----------- | ----------------- | -------------- |
| **Upstash** | âœ… 10,000 ìš”ì²­/ì¼ | ì„œë²„ë¦¬ìŠ¤, ì‰¬ì›€ |
| Redis Cloud | âœ… 30MB           | ì•ˆì •ì          |

---

## ğŸ’» ì½”ë“œ ë ˆë²¨ í™•ì¥ì„± ì¤€ë¹„

### 1. í™˜ê²½ë³€ìˆ˜ë¡œ ì„¤ì • ë¶„ë¦¬

```python
import os

DATABASE_URL = os.getenv("DATABASE_URL")
REDIS_URL = os.getenv("REDIS_URL")
CACHE_TTL = int(os.getenv("CACHE_TTL", 3600))
```

### 2. ìºì‹œ ë ˆì´ì–´ ì¶”ìƒí™”

```python
from abc import ABC, abstractmethod
import redis
import json

class CacheService(ABC):
    @abstractmethod
    def get(self, key: str): pass

    @abstractmethod
    def set(self, key: str, value: any, ttl: int): pass

# ë©”ëª¨ë¦¬ ìºì‹œ (ê°œë°œìš©)
class MemoryCache(CacheService):
    def __init__(self):
        self._cache = {}

    def get(self, key: str):
        return self._cache.get(key)

    def set(self, key: str, value: any, ttl: int):
        self._cache[key] = value

# Redis ìºì‹œ (í”„ë¡œë•ì…˜)
class RedisCache(CacheService):
    def __init__(self, url: str):
        self._client = redis.from_url(url)

    def get(self, key: str):
        data = self._client.get(key)
        return json.loads(data) if data else None

    def set(self, key: str, value: any, ttl: int):
        self._client.setex(key, ttl, json.dumps(value))

# íŒ©í† ë¦¬ í•¨ìˆ˜
def get_cache() -> CacheService:
    redis_url = os.getenv("REDIS_URL")
    if redis_url:
        return RedisCache(redis_url)
    return MemoryCache()
```

### 3. API Rate Limiting

```python
from fastapi import FastAPI
from slowapi import Limiter
from slowapi.util import get_remote_address

limiter = Limiter(key_func=get_remote_address)
app = FastAPI()

@app.get("/api/music/search")
@limiter.limit("30/minute")  # ë¶„ë‹¹ 30íšŒ ì œí•œ
async def search_music(query: str):
    ...
```

### 4. ìºì‹± ì ìš© ì˜ˆì‹œ

```python
async def search_music_with_cache(query: str, country: str):
    cache = get_cache()

    # 1. ìºì‹œ í™•ì¸
    cache_key = f"search:{country}:{query}"
    cached = cache.get(cache_key)
    if cached:
        return cached  # ìºì‹œ íˆíŠ¸! âš¡

    # 2. API í˜¸ì¶œ
    result = ytmusic.search(query)

    # 3. ìºì‹œ ì €ì¥
    cache.set(cache_key, result, ttl=3600)

    return result
```

---

## ğŸŒ ê¸€ë¡œë²Œ ë°°í¬ ì „ëµ

### CDN í™œìš©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  ğŸ‘¤ í•œêµ­ ì‚¬ìš©ì                    ğŸ‘¤ ë¯¸êµ­ ì‚¬ìš©ì           â”‚
â”‚       â”‚                                â”‚                    â”‚
â”‚       â–¼                                â–¼                    â”‚
â”‚  ğŸŒ í•œêµ­ CDN ì„œë²„               ğŸŒ ë¯¸êµ­ CDN ì„œë²„            â”‚
â”‚  (ë¹ ë¥¸ ì‘ë‹µ!)                   (ë¹ ë¥¸ ì‘ë‹µ!)                â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Cloudflare ì„¤ì • (ë¬´ë£Œ)

- DDoS ë°©ì–´
- ê¸€ë¡œë²Œ CDN
- ì´ë¯¸ì§€ ìµœì í™”
- SSL ì¸ì¦ì„œ

---

## ğŸ’° ë¹„ìš© ì˜ˆìƒ (ì›” ê¸°ì¤€)

|  ë™ì‹œì ‘ì†  | Vercel | ë°±ì—”ë“œ |  DB  | Redis | CDN  |  ì´ ë¹„ìš©  |
| :--------: | :----: | :----: | :--: | :---: | :--: | :-------: |
|   ~100ëª…   |  ë¬´ë£Œ  |  ë¬´ë£Œ  | ë¬´ë£Œ | ë¬´ë£Œ  | ë¬´ë£Œ |  **$0**   |
|  ~1,000ëª…  |  ë¬´ë£Œ  |  ~$10  | $25  | ë¬´ë£Œ  | ë¬´ë£Œ | **~$35**  |
| ~10,000ëª…  |  $20   |  ~$50  | $75  |  $10  | ë¬´ë£Œ | **~$155** |
| ~100,000ëª… |  $150  | ~$200  | $300 |  $50  | $20  | **~$720** |

---

## âœ… í™•ì¥ì„± ì²´í¬ë¦¬ìŠ¤íŠ¸

### 1ë‹¨ê³„: ì§€ê¸ˆ ë°”ë¡œ (ì½”ë“œ ë ˆë²¨)

- [ ] í™˜ê²½ë³€ìˆ˜ë¡œ ì„¤ì • ë¶„ë¦¬
- [ ] ìºì‹œ ë ˆì´ì–´ ì¶”ìƒí™” ì„¤ê³„
- [ ] API Rate Limiting ì ìš©
- [ ] Docker ì»¨í…Œì´ë„ˆí™”
- [ ] ì—ëŸ¬ í•¸ë“¤ë§ ë° ë¡œê¹…

### 2ë‹¨ê³„: ì‚¬ìš©ì 100ëª…+

- [ ] Upstash Redis ì¶”ê°€
- [ ] Cloudflare ì ìš©
- [ ] ëª¨ë‹ˆí„°ë§ ê¸°ë³¸ ì„¤ì •

### 3ë‹¨ê³„: ì‚¬ìš©ì 1,000ëª…+

- [ ] Railway â†’ Fly.io ì´ì „
- [ ] Supabase ìœ ë£Œ í”Œëœ
- [ ] ìƒì„¸ ëª¨ë‹ˆí„°ë§ (Sentry ë“±)

### 4ë‹¨ê³„: ì‚¬ìš©ì 10,000ëª…+

- [ ] ë©€í‹° ë¦¬ì „ ë°°í¬
- [ ] ë¡œë“œ ë°¸ëŸ°ì‹±
- [ ] ì „ìš© DB ì¸ìŠ¤í„´ìŠ¤
- [ ] ìë™ ìŠ¤ì¼€ì¼ë§ ì •ì±… ì„¤ì •

---

## ğŸ“ˆ ëª¨ë‹ˆí„°ë§ ë„êµ¬

| ë„êµ¬                   | ìš©ë„            | ë¬´ë£Œ í”Œëœ |
| ---------------------- | --------------- | :-------: |
| **Sentry**             | ì—ëŸ¬ ì¶”ì        |    âœ…     |
| **Uptime Robot**       | ìƒíƒœ ëª¨ë‹ˆí„°ë§   |    âœ…     |
| **Vercel Analytics**   | í”„ë¡ íŠ¸ì—”ë“œ ë¶„ì„ |    âœ…     |
| **Supabase Dashboard** | DB ëª¨ë‹ˆí„°ë§     |    âœ…     |

---

## ğŸ¯ í•µì‹¬ ì›ì¹™

1. **ì²˜ìŒë¶€í„° ìºì‹œ ì„¤ê³„**: ëª¨ë“  ì™¸ë¶€ API í˜¸ì¶œì— ìºì‹œ ì ìš©
2. **í™˜ê²½ë³€ìˆ˜ ë¶„ë¦¬**: ì„¤ì •ì€ ì½”ë“œê°€ ì•„ë‹Œ í™˜ê²½ë³€ìˆ˜ì—
3. **ì„œë²„ë¦¬ìŠ¤ ìš°ì„ **: ê´€ë¦¬ ë¶€ë‹´ ìµœì†Œí™”
4. **ì ì§„ì  í™•ì¥**: í•„ìš”í•  ë•Œ í™•ì¥, ê³¼ë„í•œ ì„ íˆ¬ì ê¸ˆì§€
